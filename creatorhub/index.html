<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" type="image/x-icon" href="creator_hub_icon.png">
    <title>Creator Hub</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="site-background" id="siteBackground"></div>
    <div class="nav">
    <div class="nav-left">
        <span class="nav-title">Creator Hub</span>
        <img src="creator_hub_icon.png" alt="Creator Hub Icon" class="nav-logo">
    </div>
        <div class="profile-menu">
            <div class="profile-trigger" id="profileTrigger"></div>
            <div class="dropdown-menu" id="dropdownMenu">
                <div class="dropdown-item" id="menuBrowse">üë• Browse Profiles</div>
                <div class="dropdown-item" id="menuCreate">‚ú® Create Profile</div>
                <div class="dropdown-item disabled" id="menuMyProfile">üë§ My Profile</div>
                <div class="dropdown-item" id="menuLogin">üîí Log In</div>
                <div class="dropdown-item" id="menuLogout" style="display:none;">üö™ Log Out</div>
            </div>
        </div>
    </div>

    <!-- Browse Page -->
    <div class="page active" id="browsePage">
        <div class="browse-container">
            <div class="browse-header">
                <span>All Users</span>
                <button class="refresh-btn" id="refreshBtn" title="Refresh profiles from server">‚Üª</button>
            </div>
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="profileSearch" placeholder="Search profiles by name...">
                    <span class="search-icon">üîç</span>
                </div>
            </div>
            <div class="profiles-grid" id="profilesGrid">
                <div style="text-align:center; padding:40px; color:#999;">Loading...</div>
            </div>
        </div>
    </div>

    <!-- Create Page -->
    <div class="page" id="createPage">
        <div class="create-container">
            <div class="creator-panel">
                <div class="creator-header" id="createHeader">Create Profile</div>
                <div class="creator-content">
                    <div class="field">
                        <label>Profile Name</label>
                        <input type="text" id="profileName" placeholder="Your name">
                    </div>
                    <div class="field">
                        <label>Password (for editing later)</label>
                        <input type="password" id="profilePassword" placeholder="Create a password">
                    </div>
                    <div class="field">
                        <label>Description</label>
                        <textarea id="profileDescription" placeholder="Tell us about yourself..." rows="4"></textarea>
                    </div>
                    <div class="field">
                        <label>Profile Images</label>
                        <select id="imageType" style="margin-bottom: 10px;">
                            <option value="profile">Profile Picture</option>
                            <option value="banner">Banner Image</option>
                            <option value="background">Background Image</option>
                        </select>
                        <div class="drop-zone" id="dropZone">Drop image URL here or paste below</div>
                        <div style="display: flex; gap: 5px;">
                            <input type="text" id="imageUrl" placeholder="Paste image URL" style="flex: 1;">
                            <button type="button" id="clearImage" style="width: auto; padding: 8px 15px; background: #e74c3c; margin: 0;">‚úï Clear</button>
                        </div>
                        
                        <div class="crop-container" id="cropContainer">
                            <label>Crop Image</label>
                            <div class="crop-instructions">Click and drag to select crop area. Drag corners to resize.</div>
                            <div class="crop-canvas-wrapper">
                                <canvas id="cropCanvas"></canvas>
                                <div class="crop-overlay" id="cropOverlay">
                                    <div class="crop-box" id="cropBox">
                                        <div class="crop-handle top-left"></div>
                                        <div class="crop-handle top-right"></div>
                                        <div class="crop-handle bottom-left"></div>
                                        <div class="crop-handle bottom-right"></div>
                                    </div>
                                </div>
                            </div>
                            <button type="button" id="applyCrop" style="background: #ffffff; color: #18181b; margin-top: 10px; font-weight: 600;">‚úì Apply Crop</button>
                        </div>
                    </div>
                    <div class="field">
                        <label>Stream URL (optional)</label>
                        <input type="text" id="streamUrl" placeholder="YouTube or Twitch URL">
                    </div>
                    <div class="field">
                        <label>Profile Card Style</label>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 10px;">
                            <div class="card-style-option" data-style="solid" style="background: #f4f4f5; border: 2px solid #52525b; padding: 15px; text-align: center; cursor: pointer; border-radius: 8px;">
                                <div style="font-weight: bold; margin-bottom: 5px; color: #18181b;">Solid</div>
                                <div style="font-size: 11px; color: #71717a;">Classic light</div>
                            </div>
                            <div class="card-style-option active" data-style="frosted" style="background: rgba(31, 33, 48, 0.8); backdrop-filter: blur(20px); border: 2px solid #ffffff; padding: 15px; text-align: center; cursor: pointer; border-radius: 8px;">
                                <div style="font-weight: bold; margin-bottom: 5px; color: #ffffff;">Frosted</div>
                                <div style="font-size: 11px; color: #a1a1aa;">Glass effect</div>
                            </div>
                            <div class="card-style-option" data-style="custom" style="background: linear-gradient(135deg, #18181b 0%, #27272a 100%); border: 2px solid #52525b; padding: 15px; text-align: center; cursor: pointer; border-radius: 8px; color: white;">
                                <div style="font-weight: bold; margin-bottom: 5px;">Custom</div>
                                <div style="font-size: 11px;">Pick color</div>
                            </div>
                        </div>
                        <div id="customColorPicker" style="display: none; margin-top: 10px;">
                            <label style="font-size: 11px; color: #666;">Card Background Color</label>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <input type="color" id="cardColor" value="#18181b" style="width: 60px; height: 40px; border: 1px solid #ddd; cursor: pointer;">
                                <input type="text" id="cardColorHex" value="#18181b" placeholder="#18181b" style="flex: 1;">
                            </div>
                            <label style="font-size: 11px; color: #666; margin-top: 8px; display: block;">Gradient (optional)</label>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <input type="color" id="cardColorGradient" value="#27272a" style="width: 60px; height: 40px; border: 1px solid #ddd; cursor: pointer;">
                                <input type="text" id="cardColorGradientHex" value="#27272a" placeholder="#27272a" style="flex: 1;">
                            </div>
                            <label style="font-size: 11px; color: #666; margin-top: 8px; display: block;">Text Color</label>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <input type="color" id="fontColor" value="#ffffff" style="width: 60px; height: 40px; border: 1px solid #ddd; cursor: pointer;">
                                <input type="text" id="fontColorHex" value="#ffffff" placeholder="#ffffff" style="flex: 1;">
                            </div>
                        </div>
                        <input type="hidden" id="cardStyle" value="frosted">
                    </div>
                    <div class="field">
                        <label>üîó Social Media Links</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>
                                <label style="font-size: 11px; color: #666;">YouTube Channel</label>
                                <input type="text" id="youtubeUrl" placeholder="YouTube URL" style="margin-top: 3px;">
                            </div>
                            <div>
                                <label style="font-size: 11px; color: #666;">Twitch Channel</label>
                                <input type="text" id="twitchUrl" placeholder="Twitch URL" style="margin-top: 3px;">
                            </div>
                            <div>
                                <label style="font-size: 11px; color: #666;">Instagram Profile</label>
                                <input type="text" id="instagramUrl" placeholder="Instagram URL" style="margin-top: 3px;">
                            </div>
                        </div>
                    </div>
                    <div class="field">
                        <label>üé¨ Favorite Media (optional)</label>
                        <div id="editMediaCardsContainer" style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 10px; min-height: 210px;">
                            <!-- Media cards will be shown here during edit -->
                        </div>
                    </div>
                    <button id="createProfile">‚ú® Create Profile</button>
                    <button id="updateProfile" style="display:none; background:#e67e22;">‚úèÔ∏è Update Profile</button>
                    <div class="status" id="createStatus"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- View Page -->
    <div class="page" id="viewPage">
        <div class="view-container">
            <button id="editProfileBtn" style="display:none; background:#27a700; height: 45px; margin-bottom: 18px; font-size: 20px">Edit Profile</button>
            <div class="profile-container">
                <div class="profile-header" id="viewBannerImg"></div>
                <div class="profile-content" id="viewProfileContent">
                    <div class="profile-img" id="viewProfileImg"></div>
                    <div class="profile-name" id="viewProfileName">Profile Name</div>
                    <div class="profile-bio" id="viewProfileBio" style="display: none;"></div>
                    <div class="profile-description" id="viewProfileDescription" style="margin-top: 15px; padding: 15px; background: #f9f9f9; border-left: 3px solid #333; color: #555; font-size: 14px; line-height: 1.6; white-space: pre-wrap; display: none;"></div>
                    <div class="profile-stats">
                        <div class="stat social-links" id="socialLinks" style="display: none; justify-content: center; width: 100%;">
                            <a href="#" id="youtubeLink" target="_blank" style="display: none;" title="YouTube Channel">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="#FF0000">
                                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                                </svg>
                            </a>
                            <a href="#" id="twitchLink" target="_blank" style="display: none;" title="Twitch Channel">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="#9146FF">
                                    <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
                                </svg>
                            </a>
                            <a href="#" id="instagramLink" target="_blank" style="display: none;" title="Instagram Profile">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="url(#instagram-gradient)">
                                    <defs>
                                        <linearGradient id="instagram-gradient" x1="0%" y1="100%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#FED576;stop-opacity:1" />
                                            <stop offset="25%" style="stop-color:#F47133;stop-opacity:1" />
                                            <stop offset="50%" style="stop-color:#BC3081;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#4C63D2;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                    <!-- EDIT BUTTON ADDED HERE -->
                    
                    
                    <!-- MEDIA CARDS SECTION -->
                    <div id="mediaCardsSection" style="display: none; margin: 20px 0;">
                        <div style="font-size: 14px; font-weight: bold; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid rgba(0,0,0,0.1);">
                            üé¨ Favorite Media
                        </div>
                        <div id="mediaCardsContainer" style="display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-start;">
                            <!-- Media cards will be populated here -->
                            <div id="addMediaCard" class="add-media-card" style="display: none;">
                                <div style="font-size: 40px; color: #999;">+</div>
                                <div style="font-size: 11px; color: #999;">Add Media</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stream" id="viewStream" style="display: none;">No stream active</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">üîí LOG IN</div>
            <div class="modal-body">
                <label>Profile Name</label>
                <input type="text" id="loginProfileName" placeholder="Enter your profile name">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter password">
                <button class="login-btn" id="loginBtn">Log In</button>
                <button class="close-btn" id="closeLoginModal">Close</button>
                <div class="status" id="loginStatus"></div>
            </div>
        </div>
    </div>

    <!-- Media Search Modal -->
    <div class="modal" id="mediaModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">üé¨ Add Favorite Media</div>
            <div class="modal-body">
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <input type="text" id="mediaSearchInput" placeholder="Search movies or TV shows..." style="flex: 1;">
                    <select id="mediaTypeSelect" style="width: 120px;">
                        <option value="movie">Movies</option>
                        <option value="tv">TV Shows</option>
                    </select>
                    <button id="mediaSearchBtn" style="width: auto; padding: 8px 20px; margin: 0;">Search</button>
                </div>
                <div id="mediaSearchResults" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; max-height: 400px; overflow-y: auto; margin-bottom: 15px;">
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">
                        Search for movies or TV shows to add to your profile
                    </div>
                </div>
                <button class="close-btn" id="closeMediaModal">Close</button>
                <div class="status" id="mediaStatus"></div>
            </div>
        </div>
    </div>

    <!-- Core Scripts - ORDER MATTERS! -->
    <!-- 1. Load crypto/cache systems FIRST -->
    <script src="crypto-helper.js"></script>
    <script src="cache-manager.js"></script>
    <script src="cropper.js"></script>
    
    <!-- 2. Load main app (depends on crypto) -->
    <script src="app.js"></script>
    
    <!-- 3. Load auth system extensions (extends app.js) -->
    <script src="auth-system.js"></script>
</body>
</html>
